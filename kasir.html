<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POS Kasir - Resto Bunda Ana</title>
<style>
  * { box-sizing: border-box; }
  body { margin:0; font-family: Arial, sans-serif; background-color: #e0f0ff; color: #333; }
  header { background-color: #b3e0ff; padding: 1rem; text-align: center; font-size: 1.5rem; font-weight: bold; color: #064273; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  .container { display: flex; height: calc(100vh - 60px); }
  .sidebar { width: 200px; background-color: #a0d8ff; padding: 1rem; display: flex; flex-direction: column; gap: 1rem; }
  .sidebar button { padding: 0.7rem; border: none; border-radius: 8px; background-color: #7ecfff; cursor: pointer; font-weight: bold; transition: 0.2s; }
  .sidebar button:hover { background-color: #64c8ff; }
  .main { flex: 1; padding: 1rem; display: flex; flex-wrap: wrap; gap: 1rem; overflow-y: auto; justify-content: flex-start; align-content: flex-start; }
  .menu-card { width: 120px; height: 120px; background-color: #d0f0ff; border-radius: 12px; display: flex; justify-content: center; align-items: center; cursor: pointer; text-align: center; font-weight: bold; transition: 0.2s; box-shadow: 0 3px 6px rgba(0,0,0,0.1);}
  .menu-card:hover { background-color: #a0d8ff; transform: translateY(-3px); }
  .sidebar-right { width: 300px; background-color: #cceeff; padding: 1rem; display: flex; flex-direction: column; gap: 0.5rem; overflow-y: auto; }
  .order-item { display: flex; justify-content: space-between; margin-bottom: 0.5rem; }
  .total { font-weight: bold; margin-top: 1rem; }
  .btn-pay, .btn-reset { margin-top: 0.5rem; padding: 0.5rem; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.2s; }
  .btn-pay { background-color: #4CAF50; color: white; }
  .btn-pay:hover { background-color: #45a049; }
  .btn-reset { background-color: #f44336; color: white; }
  .btn-reset:hover { background-color: #da190b; }
  /* Pop-up loading */
  .loading-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.3); display: flex; justify-content: center; align-items: center; display: none; z-index: 999; }
  .spinner { border: 8px solid #f3f3f3; border-top: 8px solid #3498db; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  /* Pop-up modal */
  .modal { display: none; position: fixed; z-index: 1000; left:0; top:0; width:100%; height:100%; overflow:auto; background-color: rgba(0,0,0,0.4); }
  .modal-content { background-color: #fefefe; margin: 15% auto; padding: 1rem; border: 1px solid #888; width: 300px; border-radius: 10px; text-align: center; }
  .modal-content button { margin: 0.5rem; padding: 0.5rem 1rem; }
  /* Input form pengeluaran */
  .expense-form { display: flex; flex-direction: column; gap: 0.5rem; background-color: #d0f0ff; padding: 0.5rem; border-radius: 8px; }
  .expense-form input { padding: 0.5rem; border-radius: 6px; border: 1px solid #888; }
  @media(max-width: 900px) {
    .container { flex-direction: column; }
    .sidebar, .sidebar-right { width: 100%; display: flex; flex-direction: row; overflow-x: auto; }
    .sidebar button { flex: 1; margin-right: 0.5rem; }
  }
</style>
</head>
<body>
<header>
  <button onclick="window.location.href='index.html'" style="margin-right:1rem; padding:0.3rem 0.6rem; border:none; border-radius:5px; cursor:pointer;">Kembali</button>
  POS Kasir - Resto Bunda Ana
</header>
<div class="container">
  <div class="sidebar">
    <button onclick="loadMenu('Semua')">Semua Menu</button>
    <button onclick="loadMenu('Makanan')">Makanan</button>
    <button onclick="loadMenu('Minuman')">Minuman</button>
    <button onclick="loadMenu('Cemilan')">Cemilan</button>
    <button onclick="showExpenseForm()">Input Pengeluaran</button>
  </div>
  <div class="main" id="main-content"></div>
  <div class="sidebar-right">
    <h3>Daftar Pesanan</h3>
    <div id="order-list"></div>
    <div class="total" id="total-amount">Total: Rp 0</div>
    <input type="number" id="input-bayar" placeholder="Bayar" />
    <div class="total" id="kembalian">Kembalian: Rp 0</div>
    <button class="btn-reset" onclick="resetOrder()">Reset Pesanan</button>
    <button class="btn-pay" onclick="payOrder()">Bayar</button>
  </div>
</div>

<div id="modal-print" class="modal">
  <div class="modal-content">
    <p>Cetak struk?</p>
    <button onclick="confirmPrint(true)">Ya</button>
    <button onclick="confirmPrint(false)">Tidak</button>
  </div>
</div>

<div id="loading" class="loading-overlay">
  <div class="spinner"></div>
</div>

<script type="module">
  // ================= Supabase =================
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.32.1/dist/supabase.min.js'

  const supabaseUrl = 'https://ekggvrzuguczvdvvzmri.supabase.co'
  const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVrZ2d2cnp1Z3ZjenZkdnZ6bXJpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczOTEyOTksImV4cCI6MjA3Mjk2NzI5OX0.S0pdzwQbC1poh3BbwtupFxSDxQ_6FBdbhGsU2DNexfQ'

  const supabase = createClient(supabaseUrl, supabaseAnonKey)

  if(!supabase){ alert('Supabase client gagal diinisialisasi. Pastikan dijalankan via HTTP/HTTPS, bukan file://') }

  // ... kode JS kasir sama persis seperti sebelumnya ...
</script>
</body>
</html>
